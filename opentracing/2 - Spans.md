## Что такое "span"?
span - это основной строительный блок распределенной трассировки, представляющий собой отдельную единицу работы, выполненной в распределенной системе.

Каждый компонент распределенной системы вносит свой span - именованную, привязанную ко времени операцию, представляющую часть рабочего процесса.

span могут содержать (и обычно содержат) "ссылки" на другие span, что позволяет собрать несколько пролетов в один полный Trace - визуализацию жизни запроса по мере его продвижения через распределенную систему.

Согласно спецификации OpenTracing, каждый span инкапсулирует следующее состояние:

- имя операции
- метка времени начала и метка времени окончания
- Набор `ключей:значений` span Tags
- Набор `ключей:значений` span Logs
- SpanContext

## Теги
Теги - это пары ключ:значение, которые позволяют пользователю аннотировать пролеты для запроса, фильтрации и понимания данных трассировки.

Теги пролета должны применяться ко всему span. В файле [semantic_conventions.md](https://github.com/opentracing/specification/blob/master/semantic_conventions.md) есть список, в котором перечислены обычные теги span для распространенных сценариев. Примеры могут включать такие ключи тегов, как `db.instance` для идентификации хоста базы данных, `http.status_code` для представления кода ответа HTTP или `error`, который может быть установлен в True, если операция, представленная в Span, не удалась.

## Логи
Логи - это пары ключ:значение, которые полезны для захвата специфических для span сообщений журнала и других отладочных или информационных данных из самого приложения. логи могут быть полезны для документирования определенного момента или события в рамках span (в отличие от тегов, которые должны применяться к span в целом).

## SpanContext
SpanContext переносит данные через границы процессов. В частности, он состоит из двух основных компонентов:

- Состояние, зависящее от реализации, для ссылки на отдельный span в пределах трассы.
т.е. определение идентификатора span и идентификатора trace в реализующем trace.
- Любые [baggage items](https://opentracing.io/docs/overview/tags-logs-baggage) 
	- Это пары ключ:значение, которые пересекают границы процесса.
	- Они могут быть полезны для того, чтобы иметь доступ к некоторым данным на протяжении всей трассы.


## Пример Span:

```
    t=0            operation name: db_query               t=x

     +-----------------------------------------------------+
     | · · · · · · · · · ·    Span     · · · · · · · · · · |
     +-----------------------------------------------------+

Tags:
- db.instance:"customers"
- db.statement:"SELECT * FROM mytable WHERE foo='bar'"
- peer.address:"mysql://127.0.0.1:3306/customers"

Logs:
- message:"Can't connect to mysql server on '127.0.0.1'(10061)"

SpanContext:
- trace_id:"abc123"
- span_id:"xyz789"
- Baggage Items:
  - special_id:"vsid1738"
```